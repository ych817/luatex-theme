\begin{codefence}\FileName{./main.tex}\Lexer{lexers/latex.py:LexerTeX}\Highlight{4-5,10}\Mode{listing above text}
\makeatletter
\define@key{family}{color}[black]{\color{#1}}
\define@key{family}{font}{#1}
\def\mybox{%
  \@ifnextchar[% 如果下一个字符是 [ 
  \@mybox%     % 那么调用带参数的版本
  {\@mybox[]}% % 否则调用不带参数的版本
}
\def\@mybox[#1]#2{%
  \setkeys{family}{#1}#2
}
\makeatother

\mybox[%
  color = red,
  font  = \ttfamily
]{%
  This is my box%
}%
\end{codefence}